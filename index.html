<!doctype html>
<meta charset="utf-8">
<title>WGU Reddit Explorer</title>
<style>
  body{font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;max-width:840px;margin:40px auto;padding:0 16px}
  h1{margin:0 0 8px}
  .card{padding:16px;border:1px solid #e5e5e5;border-radius:10px;margin:12px 0}
  form{display:flex;gap:8px;margin-top:8px}
  input[type=text]{flex:1;padding:10px}
  button{padding:10px 14px;cursor:pointer}
  .links a{display:block;margin:6px 0}
</style>

<h1>WGU Reddit Explorer â€” 10k recent</h1>
<p>Browse the most recent ~10,000 posts. Use the built-in search bar (top of table) or the quick search below.</p>

<div class="card">
  <strong>Quick search</strong>
  <form id="f">
    <input id="q" type="text" placeholder="e.g. transfer credits, mentor, proctored exam" autofocus>
    <button type="submit">Search</button>
  </form>
  <small>Full-text search across title and body.</small>
</div>

<div class="card">
  <strong>Jump in</strong>
  <div class="links">
    <a id="lnk-default">Default view (recent posts with search bar)</a>
    <a id="lnk-week">Last 7 days</a>
    <a id="lnk-llm">LLM-Friendly view</a>
  </div>
</div>

<div class="card">
  <strong>Downloads</strong>
  <div class="links">
    <a id="dl-csv">Posts (CSV, newest first)</a>
    <a id="dl-json">Posts (JSON, newest first)</a>
  </div>
</div>

<script>
  const base = "https://lite.datasette.io/";
  const db = "https://wguDataNinja.github.io/datasette_lite_reddit_explorer/data/wgu_reddit_10k.db";
  const meta = "https://wguDataNinja.github.io/datasette_lite_reddit_explorer/metadata.json";

  function ds(hash){
    const u = new URL(base);
    u.searchParams.set("url", db);
    u.searchParams.set("metadata", meta);
    u.searchParams.set("install", "datasette-render-html");
    return u.toString() + hash;
  }

  // quick search
  document.getElementById("f").addEventListener("submit", (e) => {
    e.preventDefault();
    const q = document.getElementById("q").value.trim();
    if(!q) return;
    location.href = ds("#/wgu_reddit_10k/Search%20by%20keyword?q=" + encodeURIComponent(q));
  });

  // links (use canned queries so Default + Last 7 days share the same columns)
  document.getElementById("lnk-default").href = ds("#/wgu_reddit_10k/Recent%20posts");
  document.getElementById("lnk-week").href    = ds("#/wgu_reddit_10k/Last%207%20days");
  document.getElementById("lnk-llm").href     = ds("#/wgu_reddit_10k/LLM-Friendly");

  // downloads (table exports, newest first)
  document.getElementById("dl-csv").href  = ds("#/wgu_reddit_10k/posts.csv?_sort_desc=created_utc");
  document.getElementById("dl-json").href = ds("#/wgu_reddit_10k/posts.json?_sort_desc=created_utc");
</script>